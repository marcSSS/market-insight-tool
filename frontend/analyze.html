<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insight.AI - å¼€å§‹åˆ†æ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <meta name="description" content="Insight.AI - æ™ºèƒ½å¸‚åœºæ´å¯Ÿåˆ†æå·¥å…·ï¼Œè¾“å…¥ä»»æ„ç½‘å€å³å¯è·å¾—æ·±åº¦å¸‚åœºåˆ†ææŠ¥å‘Š">
    <meta name="keywords" content="å¸‚åœºåˆ†æ,AIåˆ†æ,å•†ä¸šæ´å¯Ÿ,ç«äº‰åˆ†æ,ç”¨æˆ·ç”»åƒ">
    <style>
        @keyframes confetti {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: linear-gradient(45deg, #fbbf24, #f59e0b, #d97706);
            animation: confetti 3s linear forwards;
            z-index: 1000;
        }
        
        @keyframes surprise-bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0, -30px, 0); }
            70% { transform: translate3d(0, -15px, 0); }
            90% { transform: translate3d(0, -4px, 0); }
        }
        
        .surprise-bounce {
            animation: surprise-bounce 1s ease-in-out;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50">
    <div class="min-h-screen">
            <!-- Header -->
    <header class="bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <a href="test.html" class="flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200">
                    <div class="w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                    </div>
                    <h1 class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                        Insight.AI
                    </h1>
                </a>
                <nav class="hidden md:flex space-x-8">
                    <a href="test.html" class="text-gray-700 hover:text-blue-600 transition-colors">é¦–é¡µ</a>
                    <a href="analyze.html" class="text-blue-600 font-semibold">åŸºç¡€åˆ†æ</a>
                    <a href="analyze_enhanced.html" class="text-gray-700 hover:text-blue-600 transition-colors">å¢å¼ºåˆ†æ</a>
                </nav>
                
                <!-- Mobile menu button -->
                <button id="mobileMenuBtn" class="md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors">
                    <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
                
                <!-- Mobile menu -->
                <div id="mobileMenu" class="hidden md:hidden absolute top-full left-0 right-0 bg-white border-b border-gray-200 shadow-lg">
                    <div class="px-4 py-3 space-y-2">
                        <a href="test.html" class="block py-2 text-gray-700 hover:text-blue-600 transition-colors">é¦–é¡µ</a>
                        <a href="analyze.html" class="block py-2 text-blue-600 font-semibold">åŸºç¡€åˆ†æ</a>
                        <a href="analyze_enhanced.html" class="block py-2 text-gray-700 hover:text-blue-600 transition-colors">å¢å¼ºåˆ†æ</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

        <!-- Main Content -->
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <!-- Header Section -->
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">
                    å¸‚åœºæ´å¯Ÿåˆ†æ
                </h2>
                <p class="text-xl text-gray-600">
                    è¾“å…¥ä»»æ„ç½‘å€ï¼Œæˆ‘ä»¬çš„AIå°†ä¸ºæ‚¨æä¾›æ·±åº¦çš„å¸‚åœºåˆ†ææŠ¥å‘Š
                </p>
            </div>

            <!-- Analysis Form -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                <form id="analysisForm" class="space-y-8">
                    <!-- URL Input -->
                    <div>
                        <label for="url" class="block text-sm font-medium text-gray-700 mb-2">
                            è¦åˆ†æçš„ç½‘å€
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                            </div>
                            <input
                                type="text"
                                id="url"
                                name="url"
                                placeholder="è¾“å…¥ç½‘å€ï¼Œå¦‚ï¼šapple.com"
                                class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"
                                required
                                autocomplete="off"
                                spellcheck="false"
                            />
                        </div>

                    </div>

                    <!-- Analysis Type Selection -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-4">
                            é€‰æ‹©åˆ†æç±»å‹
                        </label>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="analysis-type-option relative p-4 border-2 rounded-lg cursor-pointer transition-colors border-blue-500 bg-blue-50" data-type="full">
                                <div class="flex items-start space-x-3">
                                    <div class="p-2 rounded-lg bg-blue-500 text-white">
                                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                        </svg>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-medium text-gray-900">å®Œæ•´åˆ†æ</h3>
                                        <p class="text-sm text-gray-600 mt-1">å¸‚åœºè¶‹åŠ¿ã€ç”¨æˆ·ç”»åƒå’Œç«äº‰åˆ†æ</p>
                                    </div>
                                    <div class="absolute top-2 right-2">
                                        <div class="w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center">
                                            <div class="w-2 h-2 bg-white rounded-full"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="analysis-type-option relative p-4 border-2 rounded-lg cursor-pointer transition-colors border-gray-200 hover:border-gray-300" data-type="market">
                                <div class="flex items-start space-x-3">
                                    <div class="p-2 rounded-lg bg-green-500 text-white">
                                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                        </svg>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-medium text-gray-900">å¸‚åœºè¶‹åŠ¿åˆ†æ</h3>
                                        <p class="text-sm text-gray-600 mt-1">å¸‚åœºè§„æ¨¡ã€CAGRå’Œå…³é”®é©±åŠ¨å› ç´ </p>
                                    </div>
                                </div>
                            </div>
                            <div class="analysis-type-option relative p-4 border-2 rounded-lg cursor-pointer transition-colors border-gray-200 hover:border-gray-300" data-type="user">
                                <div class="flex items-start space-x-3">
                                    <div class="p-2 rounded-lg bg-purple-500 text-white">
                                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                                        </svg>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-medium text-gray-900">ç”¨æˆ·ç”»åƒåˆ†æ</h3>
                                        <p class="text-sm text-gray-600 mt-1">ç›®æ ‡ç”¨æˆ·ç¾¤ä½“å’Œéœ€æ±‚ç—›ç‚¹</p>
                                    </div>
                                </div>
                            </div>
                            <div class="analysis-type-option relative p-4 border-2 rounded-lg cursor-pointer transition-colors border-gray-200 hover:border-gray-300" data-type="competitor">
                                <div class="flex items-start space-x-3">
                                    <div class="p-2 rounded-lg bg-orange-500 text-white">
                                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                                        </svg>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-medium text-gray-900">ç«äº‰åˆ†æ</h3>
                                        <p class="text-sm text-gray-600 mt-1">ç«äº‰å¯¹æ‰‹å’Œç«äº‰æ ¼å±€åˆ†æ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="pt-6">
                        <button
                            type="submit"
                            id="submitBtn"
                            class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 px-8 rounded-xl font-semibold text-lg hover:from-blue-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:transform-none focus:outline-none focus:ring-4 focus:ring-blue-500/50 active:transform active:scale-95"
                        >
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <span id="submitText">å¼€å§‹åˆ†æ</span>
                            <svg id="loadingIcon" class="hidden ml-2 animate-spin h-5 w-5 text-white" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Features Preview -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">åˆ†æå†…å®¹é¢„è§ˆ</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="text-center p-6 border border-gray-200 rounded-lg">
                        <div class="inline-flex p-3 rounded-full bg-blue-100 text-blue-600 mb-4">
                            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                        </div>
                        <h3 class="font-semibold text-gray-900 mb-2">å¸‚åœºè¶‹åŠ¿</h3>
                        <p class="text-sm text-gray-600">
                            å¸‚åœºè§„æ¨¡ã€å¢é•¿ç‡ã€é©±åŠ¨å› ç´ ã€è¡Œä¸šè¶‹åŠ¿
                        </p>
                    </div>
                    <div class="text-center p-6 border border-gray-200 rounded-lg">
                        <div class="inline-flex p-3 rounded-full bg-green-100 text-green-600 mb-4">
                            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                            </svg>
                        </div>
                        <h3 class="font-semibold text-gray-900 mb-2">ç”¨æˆ·ç”»åƒ</h3>
                        <p class="text-sm text-gray-600">
                            ç›®æ ‡ç”¨æˆ·ã€éœ€æ±‚ç—›ç‚¹ã€è¡Œä¸ºæ¨¡å¼ã€äººå£ç‰¹å¾
                        </p>
                    </div>
                    <div class="text-center p-6 border border-gray-200 rounded-lg">
                        <div class="inline-flex p-3 rounded-full bg-purple-100 text-purple-600 mb-4">
                            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                            </svg>
                        </div>
                        <h3 class="font-semibold text-gray-900 mb-2">ç«äº‰åˆ†æ</h3>
                        <p class="text-sm text-gray-600">
                            ç«äº‰å¯¹æ‰‹ã€ç«äº‰æ ¼å±€ã€äº§å“å¯¹æ¯”ã€è¥é”€ç­–ç•¥
                        </p>
                    </div>
                </div>
            </div>

            <!-- Progress Section -->
            <div id="progressSection" class="hidden mt-8 bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">åˆ†æè¿›åº¦</h2>
                <div id="progressContent" class="space-y-6">
                    <!-- Progress will be populated here -->
                </div>
            </div>

            <!-- Results Section -->
            <div id="resultsSection" class="hidden mt-8 bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">åˆ†æç»“æœ</h2>
                <div id="resultsContent" class="space-y-6">
                    <!-- Results will be populated here -->
                </div>
            </div>

            <!-- Upgrade Section -->
            <div id="upgradeSection" class="hidden mt-8">
                <!-- Step 1: Premium Offer -->
                <div id="premiumOffer" class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl shadow-lg p-8 border border-purple-200">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">ğŸ¯ ä¸“ä¸šå¢å¼ºç‰ˆåˆ†æ</h3>
                        <p class="text-gray-600 mb-6 max-w-2xl mx-auto">
                            è·å¾—æ·±åº¦æˆ˜ç•¥å»ºè®®ã€ç²¾å‡†è¥é”€æœºä¼šç‚¹ã€æ½œåœ¨ç”¨æˆ·æ´å¯Ÿç­‰ä¸“ä¸šçº§åˆ†ææŠ¥å‘Š
                        </p>
                        
                        <!-- Pricing Card -->
                        <div class="bg-white rounded-xl shadow-lg p-6 mb-6 max-w-sm mx-auto">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-gray-900 mb-2">$100</div>
                                <div class="text-sm text-gray-500 mb-4">ä¸€æ¬¡æ€§ä»˜è´¹ï¼Œæ°¸ä¹…ä½¿ç”¨</div>
                                <div class="space-y-2 text-sm text-gray-600 mb-4">
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                        </svg>
                                        æ·±åº¦æˆ˜ç•¥åˆ†æ
                                    </div>
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                        </svg>
                                        è¥é”€æœºä¼šæ´å¯Ÿ
                                    </div>
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                        </svg>
                                        ç”¨æˆ·ç”»åƒæ·±åº¦åˆ†æ
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <button onclick="startPayment()" class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                                </svg>
                                ç«‹å³æ”¯ä»˜ $100
                            </button>
                            <button onclick="hideUpgrade()" class="inline-flex items-center px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:border-gray-400 hover:text-gray-800 transition-all duration-200">
                                ç»§ç»­ä½¿ç”¨åŸºç¡€ç‰ˆ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Payment Processing -->
                <div id="paymentProcessing" class="hidden bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl shadow-lg p-8 border border-purple-200">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">å¤„ç†æ”¯ä»˜ä¸­...</h3>
                        <p class="text-gray-600 mb-6">æ­£åœ¨éªŒè¯æ‚¨çš„æ”¯ä»˜ä¿¡æ¯ï¼Œè¯·ç¨å€™</p>
                        <div class="flex justify-center">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Surprise Free -->
                <div id="surpriseFree" class="hidden bg-gradient-to-r from-green-50 to-blue-50 rounded-xl shadow-lg p-8 border border-green-200">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-r from-green-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">ğŸ‰ æƒŠå–œï¼å®Œå…¨å…è´¹ï¼</h3>
                        <p class="text-gray-600 mb-6 max-w-2xl mx-auto">
                            Marc å†³å®šå…è´¹æä¾›å¢å¼ºç‰ˆåˆ†æï¼<br>
                            <span class="text-sm text-green-600 font-medium">ğŸ’¡ è¿™åªæ˜¯ä¸€ä¸ªæœ‰è¶£çš„ç”¨æˆ·ä½“éªŒè®¾è®¡ ğŸ˜„</span>
                        </p>
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <a href="analyze_enhanced.html" class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-green-600 to-blue-600 text-white font-semibold rounded-xl hover:from-green-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                                ç«‹å³ä½“éªŒå¢å¼ºç‰ˆ
                            </a>
                            <button onclick="hideUpgrade()" class="inline-flex items-center px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:border-gray-400 hover:text-gray-800 transition-all duration-200">
                                ç»§ç»­ä½¿ç”¨åŸºç¡€ç‰ˆ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        });

        // ç‚¹å‡»å¤–éƒ¨å…³é—­ç§»åŠ¨ç«¯èœå•
        document.addEventListener('click', function(event) {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            
            if (!mobileMenuBtn.contains(event.target) && !mobileMenu.contains(event.target)) {
                mobileMenu.classList.add('hidden');
            }
        });

        // URLæ ‡å‡†åŒ–å‡½æ•°
        function normalizeUrl(url) {
            // å»é™¤é¦–å°¾ç©ºæ ¼
            url = url.trim();
            
            // å¦‚æœä¸ºç©ºï¼Œè¿”å›null
            if (!url) return null;
            
            // å¦‚æœå·²ç»åŒ…å«åè®®ï¼Œç›´æ¥è¿”å›
            if (url.startsWith('http://') || url.startsWith('https://')) {
                return url;
            }
            
            // å¦‚æœæ²¡æœ‰wwwå‰ç¼€ï¼Œæ·»åŠ 
            if (!url.startsWith('www.')) {
                url = 'www.' + url;
            }
            
            // æ·»åŠ httpsåè®®
            return 'https://' + url;
        }

        // åˆ†æç±»å‹é€‰æ‹©
        document.querySelectorAll('.analysis-type-option').forEach(option => {
            option.addEventListener('click', function() {
                // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
                document.querySelectorAll('.analysis-type-option').forEach(opt => {
                    opt.classList.remove('border-blue-500', 'bg-blue-50');
                    opt.classList.add('border-gray-200');
                    const checkmark = opt.querySelector('.absolute');
                    if (checkmark) checkmark.remove();
                });
                
                // æ·»åŠ é€‰ä¸­çŠ¶æ€
                this.classList.remove('border-gray-200');
                this.classList.add('border-blue-500', 'bg-blue-50');
                
                // æ·»åŠ é€‰ä¸­æ ‡è®°
                const checkmark = document.createElement('div');
                checkmark.className = 'absolute top-2 right-2';
                checkmark.innerHTML = '<div class="w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center"><div class="w-2 h-2 bg-white rounded-full"></div></div>';
                this.appendChild(checkmark);
            });
        });

        // é”®ç›˜å¿«æ·é”®æ”¯æŒ
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + Enter æäº¤è¡¨å•
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                document.getElementById('analysisForm').dispatchEvent(new Event('submit'));
            }
            
            // Escape é”®å…³é—­ç§»åŠ¨ç«¯èœå•
            if (e.key === 'Escape') {
                document.getElementById('mobileMenu').classList.add('hidden');
            }
        });

        // è¡¨å•æäº¤
        document.getElementById('analysisForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            let url = document.getElementById('url').value.trim();
            const selectedType = document.querySelector('.analysis-type-option.border-blue-500')?.dataset.type || 'full';
            
            if (!url) {
                alert('è¯·è¾“å…¥è¦åˆ†æçš„ç½‘å€');
                return;
            }

            // æ™ºèƒ½URLæ ¼å¼å¤„ç†
            url = normalizeUrl(url);
            if (!url) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„ç½‘å€');
                return;
            }

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            const submitBtn = document.getElementById('submitBtn');
            const submitText = document.getElementById('submitText');
            const loadingIcon = document.getElementById('loadingIcon');
            
            // æ·»åŠ åŠ è½½åŠ¨ç”»å’Œç¦ç”¨çŠ¶æ€
            submitBtn.disabled = true;
            submitText.textContent = 'åˆ†æä¸­...';
            loadingIcon.classList.remove('hidden');
            
            // æ·»åŠ æŒ‰é’®ç‚¹å‡»åé¦ˆ
            submitBtn.classList.add('animate-pulse');
            
            submitBtn.disabled = true;
            submitText.textContent = 'åˆ†æä¸­...';
            loadingIcon.classList.remove('hidden');

            try {
                console.log('Submitting analysis request:', { url, analysis_type: selectedType });
                // è°ƒç”¨åç«¯API
                const response = await axios.post('http://localhost:8000/api/analyze', {
                    url: url,
                    analysis_type: selectedType
                });

                console.log('Analysis response:', response.data);

                if (response.data.task_id) {
                    // æ˜¾ç¤ºè¿›åº¦ç›‘æ§
                    showProgress(response.data.task_id, url, selectedType);
                    // å¼€å§‹ç›‘æ§è¿›åº¦
                    monitorProgress(response.data.task_id);
                } else {
                    throw new Error('å¯åŠ¨åˆ†æä»»åŠ¡å¤±è´¥');
                }
            } catch (error) {
                console.error('Analysis error:', error);
                const errorMessage = error.response?.data?.detail || error.message || 'åˆ†æè¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
                showResults({
                    status: 'error',
                    message: errorMessage,
                    url: url
                });
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                submitBtn.disabled = false;
                submitText.textContent = 'å¼€å§‹åˆ†æ';
                loadingIcon.classList.add('hidden');
            }
        });

        // æ˜¾ç¤ºè¿›åº¦
        function showProgress(taskId, url, analysisType) {
            const progressSection = document.getElementById('progressSection');
            const progressContent = document.getElementById('progressContent');
            
            const html = `
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                    <div class="mb-4">
                        <h3 class="text-lg font-medium text-blue-800 mb-3">åˆ†æè¿›è¡Œä¸­</h3>
                        <div class="flex justify-between text-sm text-gray-600 mb-2">
                            <span>åˆ†æç½‘å€: ${url}</span>
                            <span>åˆ†æç±»å‹: ${getAnalysisTypeName(analysisType)}</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div id="progressBar" class="bg-gradient-to-r from-blue-600 to-purple-600 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between text-sm text-gray-600 mt-2">
                            <span id="progressText">æ­£åœ¨åˆå§‹åŒ–...</span>
                            <span id="progressPercent">0%</span>
                        </div>
                    </div>
                </div>
            `;
            
            progressContent.innerHTML = html;
            progressSection.classList.remove('hidden');
            
            // æ»šåŠ¨åˆ°è¿›åº¦åŒºåŸŸ
            progressSection.scrollIntoView({ behavior: 'smooth' });
        }

        // ç›‘æ§è¿›åº¦
        async function monitorProgress(taskId) {
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const progressPercent = document.getElementById('progressPercent');
            
            let retryCount = 0;
            let lastProgress = 0;
            let stuckTime = 0;
            const maxRetries = 5;
            const maxStuckTime = 30000; // 30ç§’æ— è¿›åº¦å˜åŒ–
            
            const checkProgress = async () => {
                try {
                    console.log(`Checking progress for task: ${taskId}`);
                    const response = await axios.get(`http://localhost:8000/api/analysis/${taskId}`);
                    const data = response.data;
                    console.log('Progress response:', data);
                    
                    if (data.status === 'processing') {
                        // æ›´æ–°è¿›åº¦
                        const progress = data.progress || 0;
                        progressBar.style.width = `${progress}%`;
                        progressPercent.textContent = `${progress}%`;
                        progressText.textContent = data.message || 'æ­£åœ¨åˆ†æ...';
                        
                        // æ£€æŸ¥æ˜¯å¦å¡ä½
                        if (progress === lastProgress) {
                            stuckTime += 1000;
                            if (stuckTime > maxStuckTime) {
                                progressText.textContent = 'åˆ†æä¼¼ä¹å¡ä½äº†ï¼Œæ­£åœ¨é‡æ–°å¯åŠ¨...';
                                // é‡æ–°å¯åŠ¨åˆ†æ
                                await restartAnalysis(taskId);
                                return;
                            }
                        } else {
                            stuckTime = 0;
                            lastProgress = progress;
                        }
                        
                        // ç»§ç»­ç›‘æ§
                        setTimeout(checkProgress, 1000);
                    } else if (data.status === 'completed') {
                        // åˆ†æå®Œæˆï¼Œæ˜¾ç¤ºç»“æœ
                        progressBar.style.width = '100%';
                        progressPercent.textContent = '100%';
                        progressText.textContent = 'åˆ†æå®Œæˆï¼';
                        
                        // æ˜¾ç¤ºè¯¦ç»†ç»“æœ
                        showDetailedResults(data);
                    } else if (data.status === 'failed') {
                        throw new Error(data.message || 'åˆ†æå¤±è´¥');
                    } else {
                        throw new Error('åˆ†æçŠ¶æ€å¼‚å¸¸');
                    }
                } catch (error) {
                    console.error('Progress check error:', error);
                    retryCount++;
                    
                    if (retryCount <= maxRetries) {
                        progressText.textContent = `æ£€æŸ¥è¿›åº¦æ—¶å‡ºé”™ï¼Œæ­£åœ¨é‡è¯•... (${retryCount}/${maxRetries})`;
                        // é‡è¯•æœºåˆ¶ï¼Œå»¶è¿Ÿé€’å¢
                        setTimeout(checkProgress, 2000 * retryCount);
                    } else {
                        // å¦‚æœé‡è¯•æ¬¡æ•°ç”¨å®Œï¼Œå°è¯•æœ€åä¸€æ¬¡è·å–ç»“æœ
                        try {
                            const finalResponse = await axios.get(`http://localhost:8000/api/analysis/${taskId}`);
                            const finalData = finalResponse.data;
                            
                            if (finalData.status === 'completed' && finalData.result) {
                                // åˆ†æå®é™…ä¸Šå·²ç»å®Œæˆï¼Œæ˜¾ç¤ºç»“æœ
                                progressBar.style.width = '100%';
                                progressPercent.textContent = '100%';
                                progressText.textContent = 'åˆ†æå®Œæˆï¼';
                                showDetailedResults(finalData);
                            } else {
                                progressText.textContent = 'åˆ†æå¤±è´¥ï¼Œè¯·é‡è¯•';
                                showRetryButton(taskId, error.message);
                            }
                        } catch (finalError) {
                            progressText.textContent = 'åˆ†æå¤±è´¥ï¼Œè¯·é‡è¯•';
                            showRetryButton(taskId, error.message);
                        }
                    }
                }
            };
            
            // å¼€å§‹ç›‘æ§
            checkProgress();
        }

        // é‡æ–°å¯åŠ¨åˆ†æ
        async function restartAnalysis(taskId) {
            try {
                const response = await axios.post('/api/analyze', {
                    url: document.getElementById('url').value,
                    analysis_type: document.querySelector('.analysis-type-option.border-blue-500')?.dataset.type || 'full'
                });
                
                if (response.data.task_id) {
                    // æ›´æ–°ä»»åŠ¡IDå¹¶é‡æ–°å¼€å§‹ç›‘æ§
                    monitorProgress(response.data.task_id);
                }
            } catch (error) {
                console.error('Restart analysis error:', error);
                showRetryButton(taskId, error.message);
            }
        }

        // æ˜¾ç¤ºé‡è¯•æŒ‰é’®
        function showRetryButton(taskId, errorMessage = '') {
            const progressContent = document.getElementById('progressContent');
            
            // æ ¹æ®é”™è¯¯ç±»å‹æ˜¾ç¤ºä¸åŒçš„æ¶ˆæ¯
            let displayMessage = 'åˆ†æè¿‡ç¨‹ä¸­é‡åˆ°äº†é—®é¢˜ï¼Œè¯·é‡è¯•';
            let errorDetail = '';
            
            if (errorMessage) {
                if (errorMessage.includes('429')) {
                    displayMessage = 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•';
                } else if (errorMessage.includes('500')) {
                    displayMessage = 'æœåŠ¡å™¨æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åå†è¯•';
                } else if (errorMessage.includes('NETWORK_ERROR')) {
                    displayMessage = 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•';
                } else {
                    errorDetail = `<p class="text-sm text-red-500 mb-4">é”™è¯¯è¯¦æƒ…: ${errorMessage}</p>`;
                }
            }
            
            const retryHtml = `
                <div class="bg-red-50 border border-red-200 rounded-lg p-6">
                    <div class="text-center">
                        <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-red-800 mb-4">åˆ†æé‡åˆ°é—®é¢˜</h3>
                        <p class="text-red-600 mb-4">${displayMessage}</p>
                        ${errorDetail}
                        <div class="flex flex-col sm:flex-row gap-3 justify-center">
                            <button onclick="retryAnalysis()" class="bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors font-semibold flex items-center justify-center">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                </svg>
                                é‡æ–°åˆ†æ
                            </button>
                            <button onclick="resetForm()" class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors font-semibold flex items-center justify-center">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>
                                </svg>
                                é‡æ–°å¼€å§‹
                            </button>
                        </div>
                    </div>
                </div>
            `;
            progressContent.innerHTML = retryHtml;
        }

        // é‡ç½®è¡¨å•
        function resetForm() {
            document.getElementById('progressSection').classList.add('hidden');
            document.getElementById('resultsSection').classList.add('hidden');
            document.getElementById('upgradeSection').classList.add('hidden');
            
            // é‡ç½®æŒ‰é’®çŠ¶æ€
            const submitBtn = document.getElementById('submitBtn');
            const submitText = document.getElementById('submitText');
            const loadingIcon = document.getElementById('loadingIcon');
            
            submitBtn.disabled = false;
            submitText.textContent = 'å¼€å§‹åˆ†æ';
            loadingIcon.classList.add('hidden');
        }

        // é‡è¯•åˆ†æ
        function retryAnalysis() {
            const url = document.getElementById('url').value;
            const selectedType = document.querySelector('.analysis-type-option.border-blue-500')?.dataset.type || 'full';
            
            if (url) {
                // é‡æ–°æäº¤è¡¨å•
                document.getElementById('analysisForm').dispatchEvent(new Event('submit'));
            }
        }

        // æ˜¾ç¤ºè¯¦ç»†ç»“æœ
        function showDetailedResults(data) {
            const resultsSection = document.getElementById('resultsSection');
            const resultsContent = document.getElementById('resultsContent');
            
            const result = data.result;
            
            const html = `
                <div class="space-y-8">
                    <!-- åˆ†ææ‘˜è¦ -->
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">åˆ†ææ‘˜è¦</h3>
                        <p class="text-gray-700 leading-relaxed">åˆ†æç½‘å€: ${result.url}</p>
                        <p class="text-gray-700 leading-relaxed">å¸‚åœºç±»åˆ«: ${result.category}</p>
                        <p class="text-gray-700 leading-relaxed">åˆ†ææ—¶é—´: ${new Date(result.analysis_timestamp).toLocaleString()}</p>
                    </div>

                    <!-- å¸‚åœºè¶‹åŠ¿ -->
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                            <svg class="h-6 w-6 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                            å¸‚åœºè¶‹åŠ¿åˆ†æ
                        </h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">å¸‚åœºè§„æ¨¡</h4>
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm text-gray-600">å¸‚åœºè§„æ¨¡</span>
                                        <span class="font-bold text-blue-600">${result.market_trends.market_size.value}</span>
                                    </div>
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm text-gray-600">å¹´å¤åˆå¢é•¿ç‡</span>
                                        <span class="font-bold text-green-600">${result.market_trends.cagr.value}</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-600">ç½®ä¿¡åº¦</span>
                                        <span class="font-bold text-purple-600">${Math.round(result.market_trends.market_size.confidence * 100)}%</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">å…³é”®é©±åŠ¨å› ç´ </h4>
                                <div class="space-y-2">
                                    ${result.market_trends.key_drivers.map(driver => 
                                        `<div class="flex items-center text-sm">
                                            <div class="w-2 h-2 bg-blue-500 rounded-full mr-2"></div>
                                            <span>${driver.value}</span>
                                        </div>`
                                    ).join('')}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ç”¨æˆ·ç”»åƒ -->
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                            <svg class="h-6 w-6 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                            </svg>
                            ç”¨æˆ·ç”»åƒåˆ†æ
                        </h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">ç°æœ‰ç”¨æˆ·</h4>
                                <div class="space-y-3">
                                    <div>
                                        <h5 class="font-medium text-gray-700 mb-1">äººå£ç»Ÿè®¡</h5>
                                        <p class="text-sm text-gray-600">${result.user_profiles.existing_users.demographics.value}</p>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-700 mb-1">è¡Œä¸ºç‰¹å¾</h5>
                                        <p class="text-sm text-gray-600">${result.user_profiles.existing_users.behaviors.value}</p>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-700 mb-1">ç—›ç‚¹</h5>
                                        <div class="space-y-1">
                                            ${result.user_profiles.existing_users.pain_points.map(pain => 
                                                `<div class="flex items-center text-sm">
                                                    <div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div>
                                                    <span>${pain.value}</span>
                                                </div>`
                                            ).join('')}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">æ½œåœ¨ç”¨æˆ·</h4>
                                <div class="space-y-3">
                                    <div>
                                        <h5 class="font-medium text-gray-700 mb-1">äººå£ç»Ÿè®¡</h5>
                                        <p class="text-sm text-gray-600">${result.user_profiles.potential_users.demographics.value}</p>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-700 mb-1">è¡Œä¸ºç‰¹å¾</h5>
                                        <p class="text-sm text-gray-600">${result.user_profiles.potential_users.behaviors.value}</p>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-700 mb-1">ç—›ç‚¹</h5>
                                        <div class="space-y-1">
                                            ${result.user_profiles.potential_users.pain_points.map(pain => 
                                                `<div class="flex items-center text-sm">
                                                    <div class="w-2 h-2 bg-orange-500 rounded-full mr-2"></div>
                                                    <span>${pain.value}</span>
                                                </div>`
                                            ).join('')}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ç«äº‰åˆ†æ -->
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                            <svg class="h-6 w-6 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                            </svg>
                            ç«äº‰åˆ†æ
                        </h3>
                        <div class="space-y-4">
                            ${result.competition.top_competitors.map(competitor => `
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <h4 class="font-semibold text-gray-800 mb-2">${competitor.name}</h4>
                                    <div class="grid md:grid-cols-3 gap-4 text-sm">
                                        <div>
                                            <span class="text-gray-600">å¸‚åœºä»½é¢:</span>
                                            <span class="font-medium text-blue-600">${competitor.market_share.value}</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">ç½‘ç«™æµé‡:</span>
                                            <span class="font-medium text-green-600">${competitor.website_traffic.value}</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">è¶‹åŠ¿è¯„åˆ†:</span>
                                            <span class="font-medium text-purple-600">${competitor.trends_score.value}</span>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <h5 class="font-medium text-gray-700 mb-1">æ ¸å¿ƒä¼˜åŠ¿:</h5>
                                        <div class="flex flex-wrap gap-2">
                                            ${competitor.core_advantages.map(advantage => 
                                                `<span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs">${advantage.value}</span>`
                                            ).join('')}
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- æˆ˜ç•¥å»ºè®® -->
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                            <svg class="h-6 w-6 text-orange-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                            æˆ˜ç•¥å»ºè®®
                        </h3>
                        <div class="space-y-4">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">æˆ˜ç•¥æ€»ç»“</h4>
                                <p class="text-gray-700 bg-gray-50 rounded-lg p-3">${result.strategic_recommendations.strategic_summary.value}</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">è¥é”€æœºä¼šç‚¹</h4>
                                <div class="space-y-2">
                                    ${result.strategic_recommendations.marketing_opportunities.map(opportunity => 
                                        `<div class="flex items-start">
                                            <div class="flex-shrink-0 w-2 h-2 bg-green-500 rounded-full mr-2 mt-2"></div>
                                            <p class="text-gray-700 text-sm">${opportunity.value}</p>
                                        </div>`
                                    ).join('')}
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2">æ½œåœ¨ç”¨æˆ·æœºä¼šç‚¹</h4>
                                <div class="space-y-2">
                                    ${result.strategic_recommendations.potential_user_opportunities.map(opportunity => 
                                        `<div class="flex items-start">
                                            <div class="flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full mr-2 mt-2"></div>
                                            <p class="text-gray-700 text-sm">${opportunity.value}</p>
                                        </div>`
                                    ).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            resultsContent.innerHTML = html;
            resultsSection.classList.remove('hidden');
            
            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            resultsSection.scrollIntoView({ behavior: 'smooth' });
            
            // æ˜¾ç¤ºå‡çº§å¼•å¯¼
            setTimeout(() => {
                document.getElementById('upgradeSection').classList.remove('hidden');
            }, 2000);
        }

        // å¼€å§‹æ”¯ä»˜æµç¨‹
        function startPayment() {
            // æ·»åŠ æŒ‰é’®ç‚¹å‡»æ•ˆæœ
            const button = event.target.closest('button');
            button.disabled = true;
            button.innerHTML = `
                <svg class="animate-spin w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
                å¤„ç†ä¸­...
            `;
            
            // éšè—ç¬¬ä¸€æ­¥ï¼Œæ˜¾ç¤ºæ”¯ä»˜å¤„ç†
            document.getElementById('premiumOffer').classList.add('hidden');
            document.getElementById('paymentProcessing').classList.remove('hidden');
            
            // æ¨¡æ‹Ÿæ”¯ä»˜å¤„ç†è¿‡ç¨‹
            setTimeout(() => {
                // æ˜¾ç¤º"éªŒè¯ä¸­"çŠ¶æ€
                const processingText = document.querySelector('#paymentProcessing p');
                processingText.textContent = 'æ­£åœ¨éªŒè¯æ”¯ä»˜ä¿¡æ¯...';
            }, 1000);
            
            setTimeout(() => {
                // æ˜¾ç¤º"å¤„ç†ä¸­"çŠ¶æ€
                const processingText = document.querySelector('#paymentProcessing p');
                processingText.textContent = 'æ­£åœ¨å¤„ç†æ‚¨çš„è®¢å•...';
            }, 2000);
            
            // 3ç§’åæ˜¾ç¤ºæƒŠå–œ
            setTimeout(() => {
                document.getElementById('paymentProcessing').classList.add('hidden');
                document.getElementById('surpriseFree').classList.remove('hidden');
                
                // æ·»åŠ æƒŠå–œæ•ˆæœ
                createConfetti();
                
                // æ·»åŠ éœ‡åŠ¨åé¦ˆï¼ˆå¦‚æœæ”¯æŒï¼‰
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }
                
                // æ·»åŠ æƒŠå–œåŠ¨ç”»
                const surpriseElement = document.getElementById('surpriseFree');
                surpriseElement.classList.add('surprise-bounce');
            }, 3000);
        }
        
        // åˆ›å»ºå½©å¸¦æ•ˆæœ
        function createConfetti() {
            const colors = ['#fbbf24', '#f59e0b', '#d97706', '#10b981', '#059669', '#3b82f6', '#2563eb'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(confetti);
                    
                    // æ¸…ç†å½©å¸¦å…ƒç´ 
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 50);
            }
        }

        // éšè—å‡çº§å¼•å¯¼
        function hideUpgrade() {
            document.getElementById('upgradeSection').classList.add('hidden');
            // é‡ç½®æ‰€æœ‰æ­¥éª¤çŠ¶æ€
            document.getElementById('premiumOffer').classList.remove('hidden');
            document.getElementById('paymentProcessing').classList.add('hidden');
            document.getElementById('surpriseFree').classList.add('hidden');
        }

        // æ˜¾ç¤ºç»“æœï¼ˆé”™è¯¯å¤„ç†ï¼‰
        function showResults(data) {
            const resultsSection = document.getElementById('resultsSection');
            const resultsContent = document.getElementById('resultsContent');
            
            const html = `
                <div class="bg-red-50 border border-red-200 rounded-lg p-6">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-sm font-medium text-red-800">åˆ†æå¤±è´¥</h3>
                            <div class="mt-2 text-sm text-red-700">
                                <p>${data.message}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            resultsContent.innerHTML = html;
            resultsSection.classList.remove('hidden');
            
            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        // è·å–åˆ†æç±»å‹åç§°
        function getAnalysisTypeName(type) {
            const types = {
                'full': 'å®Œæ•´åˆ†æ',
                'market': 'å¸‚åœºè¶‹åŠ¿åˆ†æ',
                'user': 'ç”¨æˆ·ç”»åƒåˆ†æ',
                'competitor': 'ç«äº‰åˆ†æ'
            };
            return types[type] || type;
        }
    </script>
</body>
</html> 
